{{- define "main" -}}
<div class="jumbotron">
  <p class="lead">Welcome to my site, <a href="https://tobilehman.com">tobilehman.com</a>. For more about me, go to <a href="/about">/about</a> </p>
  <hr>
  <p class="lead">Below is some of my writing. I enjoy writing about <a href="/tags/math">math</a>, <a href="/tags/programming">programming</a>, and <a href="/tags/history">history</a> </p>
</div>
<div class="container">
  <div class="row">
    <div class="col-sm">
      <p class="lead">
      <h3>Recent posts</h3>
      </p>
      <div>
        {{ range where (.Paginator 6).Pages "Section" "==" "posts" }}
        <p>
          <a href="{{ .Permalink }}">{{ .Title | markdownify }}</a>
          {{ $customDateFormat := "January 2, 2006" }}
          {{ with .Site.Params.customDateFormat }}{{ $customDateFormat = . }}{{ end }}
          <br>
          <small class="text-secondary">{{ .PublishDate.Format $customDateFormat }}</small>
          {{ partial "tags" . }}
          {{ if eq .Site.Params.showPostSummary true }}
          <br>
          {{ .Summary }}
          {{ end }}
        </p>
        {{ end }}
        <a href="/posts">All posts</a>
      </div>

    </div>
    <div class="col-sm">
      <p class="lead">
      <h3>Tags</h3>
      </p>
      {{ if not (eq (len $.Site.Taxonomies.tags) 0) }}
    {{ $fontUnit := "rem" }}
    {{ $largestFontSize := 2.0 }}
    {{ $largestFontSize := 2.5 }}
    {{ $smallestFontSize := 1.0 }}
    {{ $fontSpread := sub $largestFontSize $smallestFontSize }}
    {{ $max := add (len (index $.Site.Taxonomies.tags.ByCount 0).Pages) 1 }}
    {{ $min := len (index $.Site.Taxonomies.tags.ByCount.Reverse 0).Pages }}
    {{ $spread := sub $max $min }}
    {{ $fontStep := div $fontSpread $spread }}

    <div id="tag-cloud" style="padding: 5px 15px">
        {{ range $name, $taxonomy := $.Site.Taxonomies.tags }}
            {{ $currentTagCount := len $taxonomy.Pages }}
            {{ $currentFontSize := (add $smallestFontSize (mul (sub $currentTagCount $min) $fontStep) ) }}
            {{ $count := len $taxonomy.Pages }}
            {{ $weigth := div (sub (math.Log $count) (math.Log $min)) (sub (math.Log $max) (math.Log $min)) }}
            {{ $currentFontSize := (add $smallestFontSize (mul (sub $largestFontSize $smallestFontSize) $weigth) ) }}
            <!--Current font size: {{$currentFontSize}}-->
            <a href="{{ "/tags/" | relLangURL }}{{ $name | urlize }}" style="font-size:{{$currentFontSize}}{{$fontUnit}}">{{ $name }}</a>
        {{ end }}
    </div>
{{ end }}
    </div>
  </div>
</div>



{{- end -}}
